<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:sm="http://servicemix.apache.org/config/1.0"
       xmlns:foo="http://servicemix.org/demo/"
       xmlns:util="java://org.apache.servicemix.components.util">

	<!-- the JBI container -->
	<sm:container id="jbi" flowName="st" embedded="true">
		<sm:activationSpecs>

			<sm:activationSpec componentName="sender"
			                   service="foo:sender" 
			                   endpoint="sender"
			                   destinationService="foo:chain">
				<sm:component>
					<bean class="org.apache.servicemix.tck.SenderComponent" />
				</sm:component>
			</sm:activationSpec>

			<sm:activationSpec componentName="chain" 
			                   service="foo:chain"
			                   destinationService="foo:receiver">
				<sm:component>
					<util:ChainedComponent>
						<services>
						    <qname>foo:transformer1</qname>
						    <qname>foo:transformer2</qname>
						</services>
					</util:ChainedComponent>
				</sm:component>
			</sm:activationSpec>

			<sm:activationSpec componentName="transformer1"
			                   service="foo:transformer1">
				<sm:component>
					<util:TransformComponent>
						<transformer>
							<util:PropertyAddTransformer name="prop1" value="value1" />
						</transformer>
					</util:TransformComponent>
				</sm:component>
			</sm:activationSpec>

			<sm:activationSpec componentName="transformer2"
			                   service="foo:transformer2">
				<sm:component>
					<util:TransformComponent>
						<transformer>
							<util:PropertyAddTransformer name="prop2" value="value2" />
						</transformer>
					</util:TransformComponent>
				</sm:component>
			</sm:activationSpec>

			<sm:activationSpec componentName="receiver"
			                   service="foo:receiver" 
			                   endpoint="receiver">
				<sm:component>
					<bean class="org.apache.servicemix.tck.ReceiverComponent" />
				</sm:component>
			</sm:activationSpec>
		</sm:activationSpecs>
  </sm:container>

</beans>
