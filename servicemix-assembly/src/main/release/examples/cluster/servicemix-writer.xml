<?xml version="1.0" encoding="UTF-8"?>
<spring:beans
	xmlns="http://servicemix.apache.org/config/1.0"
	xmlns:spring="http://xbean.org/schemas/spring/1.0"
	xmlns:foo="http://servicemix.org/demo/">

	<!-- the JBI container -->
	<container spring:id="jbi" name="writer" flowName="jms" useMBeanServer="true"
		createMBeanServer="true" dumpStats="true" statsInterval="10" rmiPort="1111">

		<activationSpecs>

			<!-- Write files to the outbox directory -->
			<activationSpec componentName="fileSender"
				service="foo:fileSender">
				<component>
					<bean xmlns="http://xbean.org/schemas/spring/1.0"
						class="org.apache.servicemix.components.file.FileWriter">
						<property name="directory" value="outbox" />
						<property name="marshaler">
							<bean
								class="org.apache.servicemix.components.util.DefaultFileMarshaler">
								<property name="fileName">
									<bean
										class="org.apache.servicemix.expression.JaxenStringXPathExpression">
										<constructor-arg
											value="concat('sample_', /sample/@id, '.xml')" />
									</bean>
								</property>
							</bean>
						</property>
					</bean>
				</component>
			</activationSpec>

		</activationSpecs>
	</container>

	<!-- the work manager (thread pool) for this container -->
	<bean xmlns="http://xbean.org/schemas/spring/1.0" id="workManager"
		class="org.jencks.factory.WorkManagerFactoryBean">
		<property name="threadPoolSize" value="30" />
	</bean>

</spring:beans>
